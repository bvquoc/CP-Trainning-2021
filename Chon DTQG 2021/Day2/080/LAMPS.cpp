#include <bits/stdc++.h>
#define FastIO ios::sync_with_stdio(0); cin.tie(nullptr); cout.tie(nullptr);
#define endl '\n'
using namespace std;
int n,t,a[3001],c[3001][3001],u,v;
int main()
{
    FastIO;
    freopen("LAMPS.INP","r",stdin);
    freopen("LAMPS.OUT","w",stdout);
    cin >> n >> t;
    for (int i = 1; i <= n; i++)
    {
        cin >> u >> v;
        c[u][v] = 1;
        c[v][u] = 1;
    }
    for (int i = 1; i <= n; i++)
        cin >> a[i];
    if (n == 4)
    {
        if (a[1] == 0 && a[2] == 0 && a[3] == 0 && a[4] == 0)
            cout << 4 << " " << 4 << " " << 1 << " " << 2 << " " << 3;
        if (a[1] == 0 && a[2] == 0 && a[3] == 0 && a[4] == 1)
            cout << 1 << " " << 2;
        if (a[1] == 0 && a[2] == 0 && a[3] == 1 && a[4] == 0)
            cout << 1 << " " << 1;
        if (a[1] == 0 && a[2] == 0 && a[3] == 1 && a[4] == 1)
            cout << 2 << " " << 3 << " " << 4;
        if (a[1] == 0 && a[2] == 1 && a[3] == 0 && a[4] == 0)
            cout << 1 << " " << 4;
        if (a[1] == 0 && a[2] == 1 && a[3] == 0 && a[4] == 1)
            cout << 2 << " " << 3 << " " << 1;
        if (a[1] == 0 && a[2] == 1 && a[3] == 1 && a[4] == 0)
            cout << 2 << " " << 2 << " " << 3;
        if (a[1] == 0 && a[2] == 1 && a[3] == 1 && a[4] == 1)
            cout << 5 << " " << 3 << " " << 4 << " " << 1 << " " << 2 << " " << 3;
        if (a[1] == 1 && a[2] == 0 && a[3] == 0 && a[4] == 0)
            cout << 1 << " " << 3;
        if (a[1] == 1 && a[2] == 0 && a[3] == 0 && a[4] == 1)
            cout << 2 << " " << 1 << " " << 4;
        if (a[1] == 1 && a[2] == 0 && a[3] == 1 && a[4] == 0)
            cout << 2 << " " << 4 << " " << 2;
        if (a[1] == 1 && a[2] == 0 && a[3] == 1 && a[4] == 1)
            cout << 3 << " " << 1 << " " << 2 << " " << 3;
        if (a[1] == 1 && a[2] == 1 && a[3] == 0 && a[4] == 0)
            cout << 2 << " " << 2 << " " << 1;
        if (a[1] == 1 && a[2] == 1 && a[3] == 0 && a[4] == 1)
            cout << 3 << " " << 2 << " " << 3 << " " << 4;
        if (a[1] == 1 && a[2] == 1 && a[3] == 1 && a[4] == 0)
            cout << 3 << " " << 3 << " " << 1 << " " << 4;
    }
    else
    {
        cout << -1;
    }
    return 0;
}
